@{
    ViewBag.Title = "Form Test Screen";
}
<!--Script References -->
<!--Reference the jQuery library. -->
<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<!--Reference the SignalR library. -->
<script src="~/Scripts/jquery.signalR-2.2.2.min.js"></script>
<!--Reference the autogenerated SignalR hub script. -->
<script src="../signalr/hubs"></script>
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
@Scripts.Render("~/bundles/bootstrap")

<h1>Welcome Gorillas!!!</h1>
<form id="1" style="border:dashed; margin-bottom: 15px; padding-left: 5px">
    <div class="form-group">
        <label for="exampleFirstName">First Name</label>
        <input type="text" class="firstName form-control" aria-describedby="emailHelp" placeholder="Enter First Name">
        <small id="firstNameHelp" class="form-text text-muted">We'll never share your personal information.</small>
    </div>
    <div class="form-group">
        <label for="exampleInputEmail1">Email Address</label>
        <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter email">
        <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
    </div>
</form>

<form id="2" style="border:dashed; margin-bottom: 15px; padding-left: 5px">
    <div class="form-group">
        <label for="exampleInputPassword1">Password</label>
        <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
    </div>
</form>
<div class="form-style-5">
	<form id="3" style="margin-bottom: 15px; padding-left: 5px">
		<fieldset>
			<legend><span class="number">1</span> Your Data Form!</legend>
			<input type="text" class="firstName" name="firstName" placeholder="Your Name *">
			<input type="text" class="country" name="country" placeholder="Your Country *">
			<select id="services" name="services" class="services">
				<option>Choose Services</option>
				<option value="Service1">Service 1</option>
				<option value="Service2">Service 2</option>
				<option value="Service3">Service 3</option>
				<option value="Service4">Service 4</option>
			</select>
			<select id="budget" name="budget" class="budget">
				<option>Budget</option>
				<option value="1500">$1500</option>
				<option value="2000">$2000</option>
				<option value="2500">$2500</option>
			</select>
		</fieldset>
	</form>
</div>
	<!--Add script to update the page.-->
	<script type="text/javascript">

		let updateFormsVisibility = function (formToDisplay) {
			$('input').removeClass('filled');
			$('select').removeClass('filled');
			$('form').trigger("reset").hide('slow');
			$('#' + formToDisplay).show('slow');
		}

		let updateFirstNameInput = function (newFirstName) {
			console.log(newFirstName);
			$('.firstName').addClass('filled');
			$('.firstName').val(newFirstName);
		}

		let updateCountryInput = function (newCountry) {
			$('.country').addClass('filled');
			$('.country').val(newCountry);
		}

		let updateServiceInput = function (newService) {
			$('.services').addClass('filled');
			$('#services').val('Service' + newService);
		}

		let updateBudgetInput = function (newBudget) {
			$('.budget').addClass('filled');
			$('#budget').val(newBudget);
		}

		//Start SignalR Connection with Server
		$.connection.hub.start()
			.done(function () {
				console.log('SignalR connection stablished');
				//$.connection.alexaHub.server.updateFormVisibility("DING DING DING");
			})
			.fail(function () {
				console.log('SignalR connection failed')
			});

		$.connection.alexaHub.client.updateFormVisibility = function (formId) {
			console.log(formId);
			updateFormsVisibility(formId);
		}

		$.connection.alexaHub.client.updateFirstNameInputField = function (firstName) {
			updateFirstNameInput(firstName);
		}

		$.connection.alexaHub.client.updateCountryInputField = function (country) {
			console.log(country);
			updateCountryInput(country);
		}

		$.connection.alexaHub.client.updateServicesInputField = function (service) {
			console.log(service);
			updateServiceInput(service);
		}

		$.connection.alexaHub.client.updateBudgetInputField = function (budget) {
			console.log(budget);
			updateBudgetInput(budget);
		}

	</script>
